import{__awaiter as t,__generator as o}from"tslib";import e from"tim-js-sdk";import{useTUIConversationContext as n}from"../context/TUIConversationContext.js";var r=function(r){var i=n("useConversation");return{createConversation:i.createConversation||function(n){return t(void 0,void 0,void 0,(function(){var t,i,a,s,u,c,p,v,m,d,C,f,l,g,b;return o(this,(function(o){switch(o.label){case 0:return"string"!=typeof n?[3,2]:[4,r.getConversationProfile(n)];case 1:return[2,o.sent().data.conversation];case 2:return t=n.name,i=n.type,a=n.groupID,s=n.introduction,u=n.notification,c=n.avatar,p=n.maxMemberNum,v=n.joinOption,m=n.memberList,d=void 0===m?[]:m,C=n.groupCustomField,f=void 0===C?[]:C,l=n.isSupportTopic,[4,r.createGroup({name:t,type:i,groupID:a,introduction:s,notification:u,avatar:c,maxMemberNum:p,joinOption:v,memberList:d,groupCustomField:f,isSupportTopic:l})];case 3:return g=o.sent(),b=g.data.group.groupID,i!==e.TYPES.GRP_AVCHATROOM?[3,5]:[4,r.joinGroup({groupID:b,type:e.TYPES.GRP_AVCHATROOM})];case 4:o.sent(),o.label=5;case 5:return[4,r.getConversationProfile("GROUP".concat(b))];case 6:return[2,o.sent().data.conversation]}}))}))},pinConversation:function(t){return r.pinConversation(t)},deleteConversation:i.deleteConversation||function(t){return r.deleteConversation(t)}}};export{r as useConversation};
