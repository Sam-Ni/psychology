import{__assign as t}from"tslib";import{jsx as o}from"react/jsx-runtime";import{useState as e,useEffect as n}from"react";import{useTUIKitContext as i}from"../../context/TUIKitContext.js";import"../../context/TUIChatStateContext.js";import"../../context/TUIChatActionContext.js";import"../../context/TUIMessageContext.js";import"../../context/ComponentContext.js";import"../../context/TUIMessageInputContext.js";import{ConversationPreviewContent as r}from"./ConversationPreviewContent.js";import{getDisplayImage as s,getDisplayTitle as a,getDisplayMessage as m,getDisplayTime as c}from"./utils.js";function v(v){var p=v.activeConversation,C=v.conversation,u=v.Preview,l=void 0===u?r:u,x=v.searchValue,d=v.conversationUpdateCount,f=i("ConversationPreview"),j=f.setActiveConversation,I=f.myProfile,T=e(s(C)),U=T[0],y=T[1],g=e(a(C,x)),P=g[0],h=g[1],w=e(m(C,I)),A=w[0],M=w[1],D=e(c(C)),b=D[0],K=D[1],S=e(C.unreadCount),V=S[0],k=S[1],q=(null==p?void 0:p.conversationID)===(null==C?void 0:C.conversationID);return l?(n((function(){h(a(C,x)),M(m(C,I)),y(s(C)),K(c(C)),k(C.unreadCount)}),[C,x,d]),o(l,t({},v,{active:q,displayImage:U,displayTitle:P,displayMessage:A,displayTime:b,unread:V,setActiveConversation:j}))):null}export{v as ConversationPreview};
