import{useState as e,useLayoutEffect as t}from"react";import s from"tim-js-sdk";import{useTUIKitContext as o}from"../../../context/TUIKitContext.js";import{useTUIChatStateContext as n}from"../../../context/TUIChatStateContext.js";import"../../../context/TUIChatActionContext.js";import"../../../context/TUIMessageContext.js";import"../../../context/ComponentContext.js";import"../../../context/TUIMessageInputContext.js";import{JSONStringToParse as a}from"../../untils.js";var m,r=((m={})[s.TYPES.MSG_TEXT]=1,m[s.TYPES.MSG_FACE]=8,m[s.TYPES.MSG_IMAGE]=3,m[s.TYPES.MSG_AUDIO]=4,m[s.TYPES.MSG_VIDEO]=5,m[s.TYPES.MSG_FILE]=6,m[s.TYPES.MSG_CUSTOM]=2,m),i=function(m){var i=m.message,l=e(null),u=l[0],p=l[1],T=e(""),S=T[0],g=T[1],I=e(null),c=I[0],M=I[1],d=e(""),x=d[0],C=d[1],E=o("TUIChat").tim,f=n("useMessageReply").messageList;t((function(){v(i)}),[i]);var v=function(e){if(null==e?void 0:e.cloudCustomData){var t=a(null==i?void 0:i.cloudCustomData),o=(null==t?void 0:t.messageReply)||"";if(o){p(o),g(null==o?void 0:o.messageSender),C(null==o?void 0:o.messageID);var n=f.filter((function(e){var t=e.ID===(null==o?void 0:o.messageID),n=t&&r[e.type]===o.messageType,a=e.type!==s.TYPES.MSG_TEXT||e.payload.text===o.messageAbstract;return t&&n&&a}));M(n[0]||E.findMessage(null==o?void 0:o.messageID))}}};return{messageReply:u,sender:S,replyMessage:c,messageID:x,message:i}};export{i as useMessageReply};
