import{__assign as t}from"tslib";import{jsx as o,jsxs as e}from"react/jsx-runtime";import s,{useState as r,useEffect as n}from"react";import i from"tim-js-sdk";import{MESSAGE_STATUS as m}from"../../constants.js";import"../../context/TUIKitContext.js";import{useTUIChatStateContext as a}from"../../context/TUIChatStateContext.js";import"../../context/TUIChatActionContext.js";import{useTUIMessageContext as l}from"../../context/TUIMessageContext.js";import"../../context/ComponentContext.js";import"../../context/TUIMessageInputContext.js";var p=s.memo((function(s){var p=s.message,c=s.children,u=s.Progress,d=s.isShow,g=void 0!==d&&d,x=r(),v=x[0],f=x[1],C=r(0),I=C[0],h=C[1],S=a("MessageProgressWithContext").uploadPenddingMessageList,j=l("MessageProgressWithContext"),M=j.isShowProgress,P=void 0!==M&&M,T=j.Progress,E=u||T,U=g||P;return n((function(){S&&S.length>0&&S.map((function(t){return(null==t?void 0:t.ID)===(null==p?void 0:p.ID)&&(f(t),h(null==t?void 0:t.progress)),t}))}),[S]),U?E?o(E,{message:v}):!((null==p?void 0:p.type)!==i.TYPES.MSG_IMAGE&&(null==p?void 0:p.type)!==i.TYPES.MSG_VIDEO&&(null==p?void 0:p.type)!==i.TYPES.MSG_FILE||(null==p?void 0:p.status)!==m.UNSEND)&&e("div",t({className:"progress-box"},{children:[o("span",{className:"progress",style:{width:"".concat(100*I,"%")}}),c]})):null}));function c(e){return o(p,t({},e))}export{c as MessageProgress};
