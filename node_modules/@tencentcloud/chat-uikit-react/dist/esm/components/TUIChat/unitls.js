import{__spreadArray as n}from"tslib";import s from"tim-js-sdk";import e from"../../constants.js";import{JSONStringToParse as t}from"../untils.js";var i=function(n){var i=null;return n.filter((function(n){var l;return n.type===s.TYPES.MSG_CUSTOM&&(i=t(null===(l=null==n?void 0:n.payload)||void 0===l?void 0:l.data)),!i||(null==i?void 0:i.businessID)!==e.TYPE_TYPING}))},l=function(n,s){var e,t={messageList:[],lastMessageID:"",isSameLastMessageID:!1};return t.messageList=n,t.messageList.length>=1&&(t.lastMessageID=null===(e=null==t?void 0:t.messageList[t.messageList.length-1])||void 0===e?void 0:e.ID),t.messageList=t.messageList.filter((function(n){return!(null==n?void 0:n.isDeleted)})),t.isSameLastMessageID=(null==t?void 0:t.lastMessageID)===(null==s?void 0:s.lastMessageID),t},r=function(s,e){var t=n([],s,!0),i=t.findIndex((function(n){return(null==n?void 0:n.ID)===(null==e?void 0:e.ID)}));return t[i]=e,t},u=function(s,e){var t=n([],s,!0),i=t.findIndex((function(n){return(null==n?void 0:n.ID)===(null==e?void 0:e.ID)}));return t.splice(i,1),t},o=function(s,e){var t=n([],s,!0);t.some((function(n){return n.ID===e.ID}))||t.push(e);var i=t.findIndex((function(n){return(null==n?void 0:n.ID)===(null==e?void 0:e.ID)}));return t[i]=e,t};export{r as handleEditMessage,i as handleMessage,l as handleMessageList,u as handleRemoveMessage,o as handleUploadPenddingMessage};
