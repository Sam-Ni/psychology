import{__assign as e}from"tslib";import{jsx as o}from"react/jsx-runtime";import{useRef as n,useState as t,useLayoutEffect as r}from"react";function i(i){var u=i.show,s=i.close,l=i.children,c=i.className,v=i.root,d=i.handleVisible,a=n(),m=t(!1),p=m[0],f=m[1];r((function(){var e,o;return u?(window.addEventListener("mouseup",s,!1),null===(e=null==a?void 0:a.current)||void 0===e||e.addEventListener("mouseup",h)):(window.removeEventListener("mouseup",s,!1),null===(o=null==a?void 0:a.current)||void 0===o||o.removeEventListener("mouseup",h)),function(){var e;window.removeEventListener("mouseup",s,!1),null===(e=null==a?void 0:a.current)||void 0===e||e.removeEventListener("mouseup",h)}}),[u]),r((function(){var e=new IntersectionObserver((function(e){var o=e[0],n=o.boundingClientRect,t=o.rootBounds,r=o.intersectionRatio;d&&r<1&&d({left:n.left-n.width<t.left,top:n.bottom+n.height<t.bottom}),f(!0)}),{root:v,threshold:[1]});return a&&u&&e.observe(null==a?void 0:a.current),function(){e.disconnect(),f(!1)}}),[a,u]);var h=function(e){e.stopPropagation()};return u&&o("div",e({role:"button",tabIndex:0,className:"popup ".concat(c," ").concat(p&&"popup-show"),ref:a},{children:l}))}export{i as Popup};
