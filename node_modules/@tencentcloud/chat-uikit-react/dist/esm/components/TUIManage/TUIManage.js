import{__assign as n}from"tslib";import{jsxs as e,jsx as t}from"react/jsx-runtime";import{useState as i,useEffect as o}from"react";import{Icon as a}from"../Icon/Icon.js";import{IconTypes as r}from"../Icon/type.js";import{Avatar as s}from"../Avatar/Avatar.js";import{defaultGroupAvatarWork as c,defaultUserAvatar as l}from"../Avatar/default.js";import{Switch as m}from"../Switch/Switch.js";import{useTUIKitContext as d}from"../../context/TUIKitContext.js";import"../../context/TUIChatStateContext.js";import"../../context/TUIChatActionContext.js";import"../../context/TUIMessageContext.js";import"../../context/ComponentContext.js";import"../../context/TUIMessageInputContext.js";import{getMessageProfile as v}from"../ConversationPreview/utils.js";import{useConversationUpdate as h}from"../TUIConversationList/hooks/useConversationUpdate.js";import{useConversation as u}from"../../hooks/useConversation.js";function p(){var p=i(null),f=p[0],C=p[1],g=i(null),I=g[0],x=g[1],j=i(!1),N=j[0],U=j[1],T=i(0),k=T[0],D=T[1],w=d("TUIManage"),A=w.conversation,M=w.setActiveConversation,S=w.tim,P=w.TUIManageShow,b=w.setTUIManageShow;h(null,(function(){D((function(n){return n+1}))}));var y=u(S),L=y.pinConversation,z=y.deleteConversation;return o((function(){C(A),x(v(A)),U(!!A&&A.isPinned)}),[A,k]),P&&A&&e("div",n({className:"tui-manage"},{children:[e("div",n({className:"tui-manage-title"},{children:[t(a,{type:r.CANCEL,width:16,height:16,onClick:function(){b(!1)}}),t("span",{children:"Conversation Information"})]})),e("div",n({className:"tui-manage-container"},{children:[e("div",n({className:"tui-manage-info"},{children:[t("div",n({className:"info-avatar"},{children:t(s,{size:64,image:(null==I?void 0:I.avatar)||((null==I?void 0:I.groupID)?c:l)})})),t("div",n({className:"info-name"},{children:(null==I?void 0:I.nick)||(null==I?void 0:I.name)})),e("div",n({className:"info-id"},{children:["ID:",(null==I?void 0:I.userID)||(null==I?void 0:I.groupID)]}))]})),e("div",n({className:"tui-manage-handle"},{children:[e("div",n({className:"manage-handle-box"},{children:[t("div",n({className:"manage-handle-title"},{children:"Pin"})),t(m,{onChange:function(n){U(n.target.checked),L({conversationID:f.conversationID,isPinned:n.target.checked})},checked:N})]})),t("div",n({className:"manage-handle-box",role:"presentation",onClick:function(){z(f.conversationID),M(null)}},{children:t("div",n({className:"manage-handle-title red"},{children:"Delete"}))}))]}))]}))]}))}export{p as TUIManage};
