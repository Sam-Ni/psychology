import{__assign as t}from"tslib";import{jsxs as e,jsx as n}from"react/jsx-runtime";import{useEffect as o,useState as r}from"react";import{MESSAGE_OPERATE as a}from"../../constants.js";import"../../context/TUIKitContext.js";import{useTUIChatStateContext as i}from"../../context/TUIChatStateContext.js";import"../../context/TUIChatActionContext.js";import"../../context/TUIMessageContext.js";import"../../context/ComponentContext.js";import{useTUIMessageInputContext as s}from"../../context/TUIMessageInputContext.js";import{formatEmojiString as u}from"../TUIMessage/utils/emojiMap.js";function c(){var c=s("TUIMessageInputDefault"),l=c.text,p=c.disabled,m=c.handleChange,d=c.handleKeyDown,x=c.handlePasete,f=c.textareaRef,v=c.focus,C=c.setText,I=c.setCursorPos,g=i("TUIMessageInputDefault").operateData;o((function(){g[a.REVOKE]&&C(u(g[a.REVOKE].payload.text,1))}),[g]),o((function(){var t,e;return v&&f.current&&(f.current.autofocus=!0,null===(t=null==f?void 0:f.current)||void 0===t||t.focus(),null===(e=null==f?void 0:f.current)||void 0===e||e.addEventListener("paste",x)),function(){var t;null===(t=null==f?void 0:f.current)||void 0===t||t.removeEventListener("paste",x)}}),[v]);var h=r(!1),j=h[0],T=h[1];return e("div",t({className:"input-box ".concat(p?"disabled":""," ").concat(j?"tui-kit-input-box--focus":"tui-kit-input-box--blur")},{children:[n("div",t({className:"input-visibility-content"},{children:l})),!p&&n("textarea",{placeholder:"send a message",rows:1,value:l,ref:f,onChange:m,onKeyDown:d,onFocus:function(t){T(!0)},onBlur:function(t){I({start:t.target.selectionStart,end:t.target.selectionEnd}),T(!1)}})]}))}export{c as TUIMessageInputDefault};
