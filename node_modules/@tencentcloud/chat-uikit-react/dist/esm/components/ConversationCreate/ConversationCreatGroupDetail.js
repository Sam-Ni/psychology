import{__spreadArray as e,__assign as t,__awaiter as r,__generator as a}from"tslib";import{jsxs as o,Fragment as n,jsx as i}from"react/jsx-runtime";import{useState as c}from"react";import{Input as s}from"../Input/Input.js";import{Icon as u}from"../Icon/Icon.js";import{IconTypes as p}from"../Icon/type.js";import{Avatar as m}from"../Avatar/Avatar.js";import{defaultUserAvatar as l,defaultGroupAvatarAVChatRoom as d,defaultGroupAvatarMeeting as f,defaultGroupAvatarPublic as v,defaultGroupAvatarWork as g}from"../Avatar/default.js";import{PageStateTypes as h}from"./ConversationCreate.js";import{ConversationGroupTypeInfo as x,typeInfoList as C,GroupType as N}from"./ConversationGroupTypeInfo.js";import{useTUIKitContext as b}from"../../context/TUIKitContext.js";import"../../context/TUIChatStateContext.js";import"../../context/TUIChatActionContext.js";import"../../context/TUIMessageContext.js";import"../../context/ComponentContext.js";import"../../context/TUIMessageInputContext.js";function I(I){var j=this,y=I.profileList,T=I.pageState,k=I.setPageState,P=I.createConversation,G=I.setConversationCreated,A=b(),U=A.setActiveConversation,R=A.myProfile,S=e([],y,!0);S.unshift(R);var w=S.map((function(e){return e.nick||e.userID})).toString(),D=c(w.length>=15?"".concat(w.slice(0,12),"..."):w),M=D[0],O=D[1],W=c(""),_=W[0],E=W[1],L=c("Work"),Y=L[0],q=L[1],z=function(e,t){var r=e.target.value;switch(t){case"name":O(r);break;case"id":E(r);break;case"type":q(r)}};return T!==h.GROUP_TYPE?o(n,{children:[o("div",t({className:"tui-conversation-create-group-detail"},{children:[i("div",t({className:"create-group-box create-group-name"},{children:i(s,{maxLength:15,value:M,onChange:function(e){z(e,"name")},border:"bottom",customClassName:"input-group-name",clearable:!0,prefix:i("div",t({className:"input-group-title"},{children:"Group Name"}))})})),i("div",t({className:"create-group-box create-group-id"},{children:i(s,{border:"bottom",customClassName:"input-group-text",clearable:!0,value:_,onChange:function(e){z(e,"id")},prefix:i("div",t({className:"input-group-title"},{children:"Group ID"}))})})),i("div",t({className:"create-group-box create-group-type"},{children:i(s,{disabled:!0,border:"bottom",customClassName:"input-group-text",prefix:i("div",t({className:"input-group-title"},{children:"Group of type"})),suffix:i(u,{onClick:function(){k(h.GROUP_TYPE)},type:p.ARROW_RIGHT,width:7,height:12}),value:Y,onChange:function(e){z(e,"type")}})})),i("div",t({className:"create-group-illustrate"},{children:C.find((function(e){return e.type===Y})).des})),o("div",t({className:"create-group-portrait"},{children:[i("div",t({className:"create-group-portrait-title"},{children:"Participants"})),i("div",t({className:"create-group-portrait-info-container"},{children:y.map((function(e){var r=e.avatar,a=e.userID,n=e.nick;return o("div",t({className:"create-group-portrait-info"},{children:[i(m,{shape:"square",size:50,image:r||l}),i("div",t({className:"create-group-portrait-info-nick"},{children:n}))]}),a)}))}))]}))]})),i("div",t({className:"tui-conversation-create-next-container"},{children:i("div",t({role:"presentation",className:"tui-conversation-create-next",onClick:function(){return r(j,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return e=function(e){switch(e){case"Work":return g;case"Public":return v;case"Meeting":return f;case"AVChatRoom":return d;default:return""}}(Y),[4,P({name:M,type:N[Y],groupID:_,avatar:e})];case 1:return t=r.sent(),U(t),G(!1),[2]}}))}))}},{children:"Create"}))}))]}):i(x,{groupType:Y,setGroupType:q,setPageState:k})}export{I as ConversationCreatGroupDetail};
