"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),r=require("react/jsx-runtime"),a=require("date-fns"),t=require("tim-js-sdk");require("react"),require("../Icon/config.js"),require("../Icon/type.js");var s=require("../Avatar/default.js"),i=require("../TUIMessage/utils/emojiMap.js");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(t),l=function(e){if(!e)return null;var r={},a=e.type,t=e.groupProfile,s=e.userProfile;switch(a){case n.default.TYPES.CONV_C2C:r=s;break;case n.default.TYPES.CONV_GROUP:r=t;case n.default.TYPES.CONV_SYSTEM:}return r},u=function(e){return e?a.isThisYear(e)?a.isToday(e)?a.format(e,"p"):a.isYesterday(e)?a.formatDistance(e,new Date):a.isThisWeek(e)?a.format(e,"eeee"):a.format(e,"MMM dd"):a.format(e,"yyyy MMM dd"):""};exports.getDisplayImage=function(e){var r=e.type,a=l(e).avatar,t=a;if(!a)switch(r){case n.default.TYPES.CONV_C2C:t=s.defaultUserAvatar;break;case n.default.TYPES.CONV_GROUP:default:t=s.defaultGroupAvatarWork}return t},exports.getDisplayMessage=function(a,t){var s=a.lastMessage,o=a.type,l=s.fromAccount,u=s.nick,c=s.nameCard,d=s.isRevoked,f="";switch(o){case n.default.TYPES.CONV_GROUP:f=(null==s?void 0:s.fromAccount)===(null==t?void 0:t.userID)?"You":"".concat(c||u||l||""),f="".concat(f?"".concat(f,":"):"");break;case n.default.TYPES.CONV_C2C:f=d?"you ":""}return r.jsxs("div",e.__assign({style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{children:[r.jsx("span",{children:f}),r.jsx("span",{children:s.isRevoked?"recalled a message":i.formatEmojiString(s.messageForShow,1)})]}))},exports.getDisplayTime=function(e){var r=e.lastMessage;return u(1e3*r.lastTime)},exports.getDisplayTitle=function(a,t,s){void 0===s&&(s="#147AFF");var i=l(a),o=i.name,u=i.nick,c=i.groupID,d=i.userID,f="";switch(a.type){case n.default.TYPES.CONV_C2C:f=u||d;break;case n.default.TYPES.CONV_GROUP:f=o||c;break;default:f=""}var p,v;return t?(v=(p=f).toLocaleLowerCase().indexOf(t.toLocaleLowerCase()),r.jsxs("div",{children:[r.jsx("span",{children:p.slice(0,v)}),r.jsx("span",e.__assign({style:{color:s}},{children:p.slice(v,v+t.length)})),r.jsx("span",{children:p.slice(v+t.length)})]})):f},exports.getMessageProfile=l,exports.getTimeStamp=u;
