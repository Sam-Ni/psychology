"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),n=require("react");exports.Popup=function(o){var r=o.show,u=o.close,i=o.children,s=o.className,c=o.root,l=o.handleVisible,v=n.useRef(),a=n.useState(!1),d=a[0],p=a[1];n.useLayoutEffect((function(){var e,t;return r?(window.addEventListener("mouseup",u,!1),null===(e=null==v?void 0:v.current)||void 0===e||e.addEventListener("mouseup",f)):(window.removeEventListener("mouseup",u,!1),null===(t=null==v?void 0:v.current)||void 0===t||t.removeEventListener("mouseup",f)),function(){var e;window.removeEventListener("mouseup",u,!1),null===(e=null==v?void 0:v.current)||void 0===e||e.removeEventListener("mouseup",f)}}),[r]),n.useLayoutEffect((function(){var e=new IntersectionObserver((function(e){var t=e[0],n=t.boundingClientRect,o=t.rootBounds,r=t.intersectionRatio;l&&r<1&&l({left:n.left-n.width<o.left,top:n.bottom+n.height<o.bottom}),p(!0)}),{root:c,threshold:[1]});return v&&r&&e.observe(null==v?void 0:v.current),function(){e.disconnect(),p(!1)}}),[v,r]);var f=function(e){e.stopPropagation()};return r&&t.jsx("div",e.__assign({role:"button",tabIndex:0,className:"popup ".concat(s," ").concat(d&&"popup-show"),ref:v},{children:i}))};
