"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),s=require("react"),n=require("tim-js-sdk"),a=require("../../context/TUIMessageInputContext.js"),u=require("./hooks/useCreateMessageInputContext.js"),r=require("./hooks/useMessageInputState.js");require("../../constants.js"),require("../../context/TUIKitContext.js");var i=require("../../context/TUIChatStateContext.js");require("../../context/TUIChatActionContext.js"),require("../../context/TUIMessageContext.js");var o=require("../../context/ComponentContext.js");require("./hooks/useHandleQuoteMessage.js");var l=require("../EmptyStateIndicator/EmptyStateIndicator.js"),I=require("./InputQuoteDefalut.js"),p=require("./TUIMessageInputDefault.js"),g=require("./InputPluginsDefalut.js"),x=require("./TUIForward.js"),c=require("./Transmitter.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var j=d(s),f=d(n);function C(s){var n=s.children,o=s.disabled,l=s.focus,I=s.pluginConfig,p=s.textareaRef,g=r.useMessageInputState(s),x=i.useTUIChatStateContext("TUIMessageInput"),c=x.textareaRef,d=x.conversation,j=(null==d?void 0:d.type)===f.default.TYPES.CONV_SYSTEM,C=i.useTUIChatStateContext("TUIMessageInput").TUIMessageInputConfig,T=l||(null==C?void 0:C.focus),m=u.useCreateMessageInputContext(e.__assign(e.__assign(e.__assign({},g),s),{textareaRef:p||(null==C?void 0:C.textareaRef)||c,disabled:o||(null==C?void 0:C.disabled)||j,focus:"boolean"!=typeof T||T,pluginConfig:I}));return t.jsx(a.TUIMessageInputContextProvider,e.__assign({value:m},{children:n}))}var T=j.default.memo((function(s){var n=s.TUIMessageInput,a=s.InputPlugins,u=s.InputQuote,r=s.isTransmitter,d=s.className,j=i.useTUIChatStateContext("TUIMessageInput").TUIMessageInputConfig,f=d||(null==j?void 0:j.className),T=r||(null==j?void 0:j.isTransmitter)||!1,m=o.useComponentContext(),v=m.TUIMessageInput,U=m.InputPlugins,q=m.InputQuote,M=n||v||p.TUIMessageInputDefault,_=a||U||g.InputPluginsDefalut||l.EmptyStateIndicator,h=u||q||I.InputQuoteDefalut;return t.jsx("div",e.__assign({className:"tui-message-input ".concat(f)},{children:t.jsxs(C,e.__assign({},s,{children:[t.jsx(x.TUIForward,{}),t.jsx(h,{}),t.jsxs("div",e.__assign({className:"tui-message-input-main"},{children:[t.jsxs("div",e.__assign({className:"tui-message-input-box"},{children:[t.jsx(_,{}),t.jsx(M,{})]})),T&&t.jsx(c.Transmitter,{})]}))]}))}))}));exports.TUIMessageInput=T;
