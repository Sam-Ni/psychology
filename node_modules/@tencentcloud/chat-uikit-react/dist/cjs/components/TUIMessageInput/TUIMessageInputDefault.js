"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),n=require("react"),s=require("../../constants.js");require("../../context/TUIKitContext.js");var r=require("../../context/TUIChatStateContext.js");require("../../context/TUIChatActionContext.js"),require("../../context/TUIMessageContext.js"),require("../../context/ComponentContext.js");var a=require("../../context/TUIMessageInputContext.js"),o=require("../TUIMessage/utils/emojiMap.js");exports.TUIMessageInputDefault=function(){var u=a.useTUIMessageInputContext("TUIMessageInputDefault"),i=u.text,c=u.disabled,l=u.handleChange,x=u.handleKeyDown,d=u.handlePasete,f=u.textareaRef,v=u.focus,p=u.setText,E=u.setCursorPos,I=r.useTUIChatStateContext("TUIMessageInputDefault").operateData;n.useEffect((function(){I[s.MESSAGE_OPERATE.REVOKE]&&p(o.formatEmojiString(I[s.MESSAGE_OPERATE.REVOKE].payload.text,1))}),[I]),n.useEffect((function(){var e,t;return v&&f.current&&(f.current.autofocus=!0,null===(e=null==f?void 0:f.current)||void 0===e||e.focus(),null===(t=null==f?void 0:f.current)||void 0===t||t.addEventListener("paste",d)),function(){var e;null===(e=null==f?void 0:f.current)||void 0===e||e.removeEventListener("paste",d)}}),[v]);var g=n.useState(!1),j=g[0],C=g[1];return t.jsxs("div",e.__assign({className:"input-box ".concat(c?"disabled":""," ").concat(j?"tui-kit-input-box--focus":"tui-kit-input-box--blur")},{children:[t.jsx("div",e.__assign({className:"input-visibility-content"},{children:i})),!c&&t.jsx("textarea",{placeholder:"send a message",rows:1,value:i,ref:f,onChange:l,onKeyDown:x,onFocus:function(e){C(!0)},onBlur:function(e){E({start:e.target.selectionStart,end:e.target.selectionEnd}),C(!1)}})]}))};
