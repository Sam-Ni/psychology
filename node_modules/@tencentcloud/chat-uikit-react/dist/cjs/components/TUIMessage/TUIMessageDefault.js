"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),s=require("react/jsx-runtime"),t=require("react"),a=require("tim-js-sdk"),n=require("./MessageBubble.js"),o=require("./MessageTip.js");require("../../context/TUIKitContext.js"),require("../../context/TUIChatStateContext.js"),require("../../context/TUIChatActionContext.js");var i=require("../../context/TUIMessageContext.js"),r=require("../../context/ComponentContext.js");require("../../context/TUIMessageInputContext.js");var u=require("./MessageSystem.js"),l=require("./MessageRevoke.js"),g=require("./MessageName.js"),d=require("./MessageAvatar.js");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var v=m(t),x=m(a);var c=v.default.memo((function(t){var a=t.message,m=t.MessageContext,v=t.MessagePlugins,c=t.className,j=r.useComponentContext(),M=j.MessageContext,T=j.MessagePlugins,_=i.useTUIMessageContext("TUIMessage"),f=_.prefix,p=_.suffix,C=_.customName,S=_.showAvatar,I=void 0===S?i.messageShowType.IN:S,P=_.showName,q=void 0===P?i.messageShowType.IN:P,y=_.customAvatar,N=m||M,h=v||T;return s.jsxs("div",e.__assign({className:"message-default\n      ".concat((null==a?void 0:a.type)===x.default.TYPES.MSG_GRP_TIP||(null==a?void 0:a.isRevoked)?"tip":null==a?void 0:a.flow,"\n      ").concat(c,"\n      ")},{children:[(null==a?void 0:a.type)===x.default.TYPES.MSG_GRP_TIP&&s.jsx(o.MessageTip,{message:a}),(null==a?void 0:a.type)===x.default.TYPES.MSG_GRP_SYS_NOTICE&&s.jsx(u.MessageSystem,{message:a}),(null==a?void 0:a.isRevoked)&&s.jsx(l.MessageRevoke,{message:a}),(null==a?void 0:a.type)!==x.default.TYPES.MSG_GRP_TIP&&(null==a?void 0:a.type)!==x.default.TYPES.MSG_GRP_SYS_NOTICE&&!(null==a?void 0:a.isRevoked)&&s.jsxs("div",e.__assign({className:"".concat(null==a?void 0:a.flow),"data-message-id":null==a?void 0:a.ID},{children:[f,s.jsx(d.MessageAvatar,{message:a,CustomAvatar:y,showType:I}),s.jsxs("main",e.__assign({className:"content"},{children:[s.jsx(g.MessageName,{message:a,CustomName:C,showType:q}),s.jsx(n.MessageBubble,e.__assign({message:a,Context:N,Plugins:h},{children:s.jsx(N,{message:a})}))]})),p]}),null==a?void 0:a.ID)]}))}));exports.TUIMessageDefault=function(t){return t.message,s.jsx(c,e.__assign({},t))};
