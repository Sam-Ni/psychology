"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("tim-js-sdk"),s=require("../../../context/TUIKitContext.js"),a=require("../../../context/TUIChatStateContext.js");require("../../../context/TUIChatActionContext.js"),require("../../../context/TUIMessageContext.js"),require("../../../context/ComponentContext.js"),require("../../../context/TUIMessageInputContext.js");var u=require("../../untils.js");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r,o=n(t),l=((r={})[o.default.TYPES.MSG_TEXT]=1,r[o.default.TYPES.MSG_FACE]=8,r[o.default.TYPES.MSG_IMAGE]=3,r[o.default.TYPES.MSG_AUDIO]=4,r[o.default.TYPES.MSG_VIDEO]=5,r[o.default.TYPES.MSG_FILE]=6,r[o.default.TYPES.MSG_CUSTOM]=2,r);exports.useMessageReply=function(t){var n=t.message,r=e.useState(null),i=r[0],d=r[1],S=e.useState(""),f=S[0],T=S[1],c=e.useState(null),g=c[0],I=c[1],m=e.useState(""),x=m[0],C=m[1],M=s.useTUIKitContext("TUIChat").tim,v=a.useTUIChatStateContext("useMessageReply").messageList;e.useLayoutEffect((function(){p(n)}),[n]);var p=function(e){if(null==e?void 0:e.cloudCustomData){var t=u.JSONStringToParse(null==n?void 0:n.cloudCustomData),s=(null==t?void 0:t.messageReply)||"";if(s){d(s),T(null==s?void 0:s.messageSender),C(null==s?void 0:s.messageID);var a=v.filter((function(e){var t=e.ID===(null==s?void 0:s.messageID),a=t&&l[e.type]===s.messageType,u=e.type!==o.default.TYPES.MSG_TEXT||e.payload.text===s.messageAbstract;return t&&a&&u}));I(a[0]||M.findMessage(null==s?void 0:s.messageID))}}};return{messageReply:i,sender:f,replyMessage:g,messageID:x,message:n}};
