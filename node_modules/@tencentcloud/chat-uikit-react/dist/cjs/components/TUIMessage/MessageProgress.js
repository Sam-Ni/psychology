"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),s=require("react"),r=require("tim-js-sdk"),n=require("../../constants.js");require("../../context/TUIKitContext.js");var o=require("../../context/TUIChatStateContext.js");require("../../context/TUIChatActionContext.js");var u=require("../../context/TUIMessageContext.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../../context/ComponentContext.js"),require("../../context/TUIMessageInputContext.js");var a=i(s),l=i(r);var c=a.default.memo((function(r){var i=r.message,a=r.children,c=r.Progress,d=r.isShow,x=void 0!==d&&d,g=s.useState(),v=g[0],S=g[1],f=s.useState(0),j=f[0],p=f[1],C=o.useTUIChatStateContext("MessageProgressWithContext").uploadPenddingMessageList,I=u.useTUIMessageContext("MessageProgressWithContext"),M=I.isShowProgress,T=void 0!==M&&M,h=I.Progress,q=c||h,P=x||T;return s.useEffect((function(){C&&C.length>0&&C.map((function(e){return(null==e?void 0:e.ID)===(null==i?void 0:i.ID)&&(S(e),p(null==e?void 0:e.progress)),e}))}),[C]),P?q?t.jsx(q,{message:v}):!((null==i?void 0:i.type)!==l.default.TYPES.MSG_IMAGE&&(null==i?void 0:i.type)!==l.default.TYPES.MSG_VIDEO&&(null==i?void 0:i.type)!==l.default.TYPES.MSG_FILE||(null==i?void 0:i.status)!==n.MESSAGE_STATUS.UNSEND)&&t.jsxs("div",e.__assign({className:"progress-box"},{children:[t.jsx("span",{className:"progress",style:{width:"".concat(100*j,"%")}}),a]})):null}));exports.MessageProgress=function(s){return t.jsx(c,e.__assign({},s))};
