"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),n=require("react/jsx-runtime"),s=require("react"),a=require("../Icon/Icon.js"),i=require("../Icon/type.js"),t=require("../Avatar/Avatar.js"),r=require("../Avatar/default.js"),o=require("../Switch/Switch.js"),c=require("../../context/TUIKitContext.js");require("../../context/TUIChatStateContext.js"),require("../../context/TUIChatActionContext.js"),require("../../context/TUIMessageContext.js"),require("../../context/ComponentContext.js"),require("../../context/TUIMessageInputContext.js");var l=require("../ConversationPreview/utils.js"),u=require("../TUIConversationList/hooks/useConversationUpdate.js"),d=require("../../hooks/useConversation.js");exports.TUIManage=function(){var v=s.useState(null),g=v[0],h=v[1],x=s.useState(null),j=x[0],m=x[1],_=s.useState(!1),C=_[0],I=_[1],f=s.useState(0),q=f[0],p=f[1],U=c.useTUIKitContext("TUIManage"),N=U.conversation,T=U.setActiveConversation,S=U.tim,k=U.TUIManageShow,A=U.setTUIManageShow;u.useConversationUpdate(null,(function(){p((function(e){return e+1}))}));var D=d.useConversation(S),M=D.pinConversation,w=D.deleteConversation;return s.useEffect((function(){h(N),m(l.getMessageProfile(N)),I(!!N&&N.isPinned)}),[N,q]),k&&N&&n.jsxs("div",e.__assign({className:"tui-manage"},{children:[n.jsxs("div",e.__assign({className:"tui-manage-title"},{children:[n.jsx(a.Icon,{type:i.IconTypes.CANCEL,width:16,height:16,onClick:function(){A(!1)}}),n.jsx("span",{children:"Conversation Information"})]})),n.jsxs("div",e.__assign({className:"tui-manage-container"},{children:[n.jsxs("div",e.__assign({className:"tui-manage-info"},{children:[n.jsx("div",e.__assign({className:"info-avatar"},{children:n.jsx(t.Avatar,{size:64,image:(null==j?void 0:j.avatar)||((null==j?void 0:j.groupID)?r.defaultGroupAvatarWork:r.defaultUserAvatar)})})),n.jsx("div",e.__assign({className:"info-name"},{children:(null==j?void 0:j.nick)||(null==j?void 0:j.name)})),n.jsxs("div",e.__assign({className:"info-id"},{children:["ID:",(null==j?void 0:j.userID)||(null==j?void 0:j.groupID)]}))]})),n.jsxs("div",e.__assign({className:"tui-manage-handle"},{children:[n.jsxs("div",e.__assign({className:"manage-handle-box"},{children:[n.jsx("div",e.__assign({className:"manage-handle-title"},{children:"Pin"})),n.jsx(o.Switch,{onChange:function(e){I(e.target.checked),M({conversationID:g.conversationID,isPinned:e.target.checked})},checked:C})]})),n.jsx("div",e.__assign({className:"manage-handle-box",role:"presentation",onClick:function(){w(g.conversationID),T(null)}},{children:n.jsx("div",e.__assign({className:"manage-handle-title red"},{children:"Delete"}))}))]}))]}))]}))};
