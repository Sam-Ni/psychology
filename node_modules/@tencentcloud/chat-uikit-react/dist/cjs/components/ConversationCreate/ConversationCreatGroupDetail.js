"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),r=require("react"),a=require("../Input/Input.js"),s=require("../Icon/Icon.js"),n=require("../Icon/type.js"),i=require("../Avatar/Avatar.js"),o=require("../Avatar/default.js"),u=require("./ConversationCreate.js"),c=require("./ConversationGroupTypeInfo.js"),p=require("../../context/TUIKitContext.js");require("../../context/TUIChatStateContext.js"),require("../../context/TUIChatActionContext.js"),require("../../context/TUIMessageContext.js"),require("../../context/ComponentContext.js"),require("../../context/TUIMessageInputContext.js"),exports.ConversationCreatGroupDetail=function(l){var d=this,g=l.profileList,v=l.pageState,x=l.setPageState,_=l.createConversation,m=l.setConversationCreated,f=p.useTUIKitContext(),j=f.setActiveConversation,h=f.myProfile,C=e.__spreadArray([],g,!0);C.unshift(h);var I=C.map((function(e){return e.nick||e.userID})).toString(),y=r.useState(I.length>=15?"".concat(I.slice(0,12),"..."):I),b=y[0],N=y[1],q=r.useState(""),T=q[0],A=q[1],G=r.useState("Work"),P=G[0],k=G[1],S=function(e,t){var r=e.target.value;switch(t){case"name":N(r);break;case"id":A(r);break;case"type":k(r)}};return v!==u.PageStateTypes.GROUP_TYPE?t.jsxs(t.Fragment,{children:[t.jsxs("div",e.__assign({className:"tui-conversation-create-group-detail"},{children:[t.jsx("div",e.__assign({className:"create-group-box create-group-name"},{children:t.jsx(a.Input,{maxLength:15,value:b,onChange:function(e){S(e,"name")},border:"bottom",customClassName:"input-group-name",clearable:!0,prefix:t.jsx("div",e.__assign({className:"input-group-title"},{children:"Group Name"}))})})),t.jsx("div",e.__assign({className:"create-group-box create-group-id"},{children:t.jsx(a.Input,{border:"bottom",customClassName:"input-group-text",clearable:!0,value:T,onChange:function(e){S(e,"id")},prefix:t.jsx("div",e.__assign({className:"input-group-title"},{children:"Group ID"}))})})),t.jsx("div",e.__assign({className:"create-group-box create-group-type"},{children:t.jsx(a.Input,{disabled:!0,border:"bottom",customClassName:"input-group-text",prefix:t.jsx("div",e.__assign({className:"input-group-title"},{children:"Group of type"})),suffix:t.jsx(s.Icon,{onClick:function(){x(u.PageStateTypes.GROUP_TYPE)},type:n.IconTypes.ARROW_RIGHT,width:7,height:12}),value:P,onChange:function(e){S(e,"type")}})})),t.jsx("div",e.__assign({className:"create-group-illustrate"},{children:c.typeInfoList.find((function(e){return e.type===P})).des})),t.jsxs("div",e.__assign({className:"create-group-portrait"},{children:[t.jsx("div",e.__assign({className:"create-group-portrait-title"},{children:"Participants"})),t.jsx("div",e.__assign({className:"create-group-portrait-info-container"},{children:g.map((function(r){var a=r.avatar,s=r.userID,n=r.nick;return t.jsxs("div",e.__assign({className:"create-group-portrait-info"},{children:[t.jsx(i.Avatar,{shape:"square",size:50,image:a||o.defaultUserAvatar}),t.jsx("div",e.__assign({className:"create-group-portrait-info-nick"},{children:n}))]}),s)}))}))]}))]})),t.jsx("div",e.__assign({className:"tui-conversation-create-next-container"},{children:t.jsx("div",e.__assign({role:"presentation",className:"tui-conversation-create-next",onClick:function(){return e.__awaiter(d,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(e){switch(e.label){case 0:return t=function(e){switch(e){case"Work":return o.defaultGroupAvatarWork;case"Public":return o.defaultGroupAvatarPublic;case"Meeting":return o.defaultGroupAvatarMeeting;case"AVChatRoom":return o.defaultGroupAvatarAVChatRoom;default:return""}}(P),[4,_({name:b,type:c.GroupType[P],groupID:T,avatar:t})];case 1:return r=e.sent(),j(r),m(!1),[2]}}))}))}},{children:"Create"}))}))]}):t.jsx(c.ConversationGroupTypeInfo,{groupType:P,setGroupType:k,setPageState:x})};
